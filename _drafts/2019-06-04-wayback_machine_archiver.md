---
layout: post
title: "Wayback Machine Archiver: Backup Pages with Python"
description: >
  The Internet Archive's Wayback Machine tries to keep a complete copy of the
  internet. With this script, you can submit pages for indexing effortlessly.
image: /files/patterns/biologia_centrali_americana_coronella_annulata.jpg
image_alt: >
  A drawing of a red, black, and yellow milk snake from Biologia Centrali
  Americana.
categories: my_software
---

{% include lead_image.html %}

The [Internet Archive][ia] runs a service called the [Wayback Machine][wbm] to
create a digital archive of the entire internet. It contains the [first
snapshot of my website][first], as well as many others. I love the ability to
go back and see how my site has evolved, and know that even if I stop hosting
it, the archive will live on. That's why I want the Wayback Machine to archive
every change my site goes through.

[ia]: https://archive.org/
[wbm]: https://archive.org/web/
[first]: https://web.archive.org/web/20130518151312/http://alexgude.com/

The Internet Archive makes it easy to submit a site for archival, but doing
this manually is time consuming. So I built [**Wayback Machine
Archiver**][wbma] to automate it.

[wbma]: https://github.com/agude/wayback-machine-archiver

## Wayback Machine Archiver

The Archiver runs on Python 2.7, or 3.4+. It can be installed with pip:

```bash
pip install wayback-machine-archiver
```

Submitting a page for archival is as easy as this:

```bash
archiver https://alexgude.com https://alexgude.com/blog/  # etc.
```

This is not much of an improvement over doing it manually, since we still have
to find each URL by hand. Luckily, most sites already have a list of all their
pages in a [sitemap.xml][sitemap].

For example, my sitemap is at `https://alexgude.com/sitemap.xml`. It is
automatically generated by [Jekyll][jekyll] when I update my site. Archiver
can read a sitemap and submit all of pages listed in it, so submitting my blog
for archiving is as easy as:

[sitemap]: https://en.wikipedia.org/wiki/Sitemaps
[jekyll]: https://en.wikipedia.org/wiki/Jekyll_(software)

```bash
archiver --sitemaps https://alexgude.com/sitemap.xml
```

Archiver has additional options like using multiple threads, logging, and
archiving the sitemap as well as the pages they link to. Checkout the
[README][wbma] on the Github site, or use the `--help` flag.

### Scheduling Archiver

Archiver follows the [Unix Philosophy][up] of "Make each program do one thing
well", so it leaves the scheduling to another program. I recommend
[`cron`][cron].

[up]: https://en.wikipedia.org/wiki/Unix_philosophy
[cron]: https://en.wikipedia.org/wiki/Cron

```
@daily archiver --sitemaps https://alexgude.com/sitemap.xml --archive-sitemap-also --log INFO
@daily archiver --sitemaps http://charles.uno/sitemap.xml --archive-sitemap-also --log INFO
@daily archiver https://www.radiokeysmusic.com --sitemaps https://www.radiokeysmusic.com/sitemap.xml --archive-sitemap-also --log INFO
```
