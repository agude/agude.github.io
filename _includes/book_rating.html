{%- assign star = '<span class="book_star full_star">★</span>' -%}
{%- assign empty_star = '<span class="book_star empty_star">☆</span>' -%}

{%- assign rating = include.rating | plus: 0 -%} {%- comment -%} Convert to int if it's a string {%- endcomment -%}

{%- if rating < 1 or rating > 5 -%}
  {% link throw_value_error %}
{%- else -%}
  <div class="book-rating star-rating-{{ rating }}">
    {%- for i in (1..5) -%}
      {%- if i <= rating -%}
        {{ star }}
      {%- else -%}
        {{ empty_star }}
      {%- endif -%}
    {%- endfor -%}
  </div>
{%- endif -%}
