<aside class="book-topbar">
  <nav class="book-nav">
    {% comment %}
      The code below dynamically generates a topbar nav of pages in /books/
      This now uses the pre-computed list from LinkCacheGenerator for performance.
    {% endcomment %}

    Sort by:

    {% assign data = site | optional: 'data' %}
    {% assign link_cache = data | optional: 'link_cache' %}
    {% assign nav_items = link_cache | optional: 'books_topbar_nav' %}

    {% if nav_items %}
      {% for node in nav_items %}
        {% assign short_title = node | optional: 'short_title' %}
        {% if short_title != null %}
          <a class="book-nav-item {% if page.url == node.url %} active{% endif %}" href="{{site.baseurl}}{{ node.url }}">{{ short_title }}</a>
        {% endif %}
      {% endfor %}
    {% endif %}
  </nav>
</aside>
